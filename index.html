<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="description" content="Qgis-visibility-analysis : Quantum GIS plugin for visibility analysis">

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>Qgis-visibility-analysis</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/zoran-cuckovic/QGIS-visibility-analysis">View on GitHub</a>

          <h1 id="project_title">Qgis-visibility-analysis</h1>
          <h2 id="project_tagline">Quantum GIS plugin for visibility analysis</h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/zoran-cuckovic/QGIS-visibility-analysis/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/zoran-cuckovic/QGIS-visibility-analysis/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
<h3>      
Current stable version: 0.4.1 br/
Current experimental version: 0.5.1
</h3>  
<a href="https://zenodo.org/badge/latestdoi/22929/zoran-cuckovic/QGIS-visibility-analysis" target="_blank"><img class="alignnone" src="https://zenodo.org/badge/22929/zoran-cuckovic/QGIS-visibility-analysis.svg" alt="10.5281/zenodo.56664" width="170" height="20" /></a>
<h3>Contents</h3>
<ol>
 	<li><strong><a href="#1a">Installation</a></strong></li>
 	<li><strong><a href="#1">Input and features</a></strong></li>
 	<li><strong><a href="#3">Common problems</a></strong></li>
</ol>
<h2 id="1a">1. Instalation</h2>
The plugin is installed as any other from the official QGIS repository (In QGIS go to <em>Plugins -&gt; Manage and install</em> ... ). Be sure to enable experimental versions if the latest plugin version is labelled as experimental.

In case the usual install doesn't work, the plugin can be installed manually.

First you need to locate your QGIS plugins folder. On windows it would be in <code>C:\users\username\.qgis2\python\plugins </code>and on Linux something like <code>~/home/.qgis2/python/plugins</code>. (do a file search for <code>.qgis2</code>)

Plugin code can then be extracted in a new folder inside the plugins folder (you should name the folder ViewshedAnalysis). The code can be downloaded from <a href="https://plugins.qgis.org/plugins/ViewshedAnalysis/">QGIS plugins repository </a>(click on the latest version number).
<h2>2. Input and features</h2>
<div class="wiki">
<h3>Data</h3>
<p id="Raster-layer"><em>Raster layer</em></p>
This can be any supported raster format, normally a terrain elevation model. Resulting viewshed model has the same resolution and extent as the original terrain data: for better performance and for convenience the <em>terrain model should be cropped</em> to the analysed area. Raster data format has to match the format of parameters: e.g. parameters specified in metres over a raster in degrees will not make a sensible result.
<p id="Observer-points"><em>Observer points</em></p>
Observer points have to be stored in a shapefile or other recognised vector formats. Lines or polygons cannot be used (unless broken up in points).

The coordinate reference systems of the elevation raster and the observer/target point(s) <em>must match</em>. There is no 'on the fly reprojection' or whatever: the best practice is to turn off automatic reprojection to test whether things overlap as they should.

If field named <strong>ID</strong> exists, it will be used for filenames and should be unique. Otherwise, the internal Id is used.
<p id="Target-points"><em>Target points</em></p>
This option is used for intervisibility analysis only. Target points behave the same way as observer points (above)
<h3 id="2-Parametres">General parametres</h3>
A basic requirement in viewshed modelling is setting up height values for both the observer and the target. For instance we might be interested whether a building 20 metres tall (<strong>target height</strong>) would be visible by an average pedestrian with eye-level at 1.6 metres (<strong>observer height</strong>).

<strong>Search radius</strong> is the size of the analysed area around each observer point.

<strong>Adapt to highest point</strong>: often it is desirable to perform a local search for a higher observation point. The search is made in a quadrangular window where the observer point is in the middle.
<h3>Algorithm parameters</h3>
<p id="Earth-curvature-and-light-refraction"><em>Earth curvature and light refraction</em></p>
Similar to other viewshed algorithms available, it is possible to account for effects of the Earth's curvature and refraction of the light when travelling through the atmosphere. Following formula is used to adjust height values in the DEM:

z <sub>adjusted</sub> = z <sub>DEM</sub> - (Dist <sup>2</sup> / Diam <sub>Earth</sub> ) * (1 - Refraction)

Where:
Dist: The planimetric distance between the observation point and the target point.
Refraction: The refractivity coefficient of light (normally it has the opposite, but smaller, effect than the curvature).
Diam: The diameter of the earth that is calculated as Semi-major axis + Semi-minor axis. These values are taken from the projection system assigned to the Raster by QGIS. In case of error or unrealistic values, the default Semi-major axis of 6378137 meters and flattening of 298.257 are used.

For more explanation cf. <a class="external" href="http://webhelp.esri.com/arcgisdesktop/9.3/index.cfm?TopicName=How%20Visibility%20works">ArcGIS web page</a>
<h3 id="3-Output">Output</h3>
<strong>Viewshed</strong> will produce a standard true/false (binary) raster. Multiple viewsheds can be combined in a one raster layer using the <strong>cumulative option</strong>.

A network of visual relationships between two sets of points (or whithin a single set) can be obtained with the <strong>intervisibility</strong> option. For each link the depth below/above horizon and the length are calculated.

Using the <strong>invisibility depth</strong> we can measure the depth of terrain below the lowest possible visibility line. However, when this option is used with the target height the measurement is made from the top of the target (terrain + target): in cases when the target is partially occluded we we obtain its apparent height.

<strong>Horizon</strong> is the last visible place on the terrain, which corresponds to fringes of visible zones. Here the horizon analysis will provide outer fringes of <em>all visible patches</em> (to be refined in future).

</div>

<h3>
<a id="authors-and-contributors" class="anchor" href="#authors-and-contributors" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Authors and Contributors</h3>

<p>You can <a href="https://help.github.com/articles/basic-writing-and-formatting-syntax/#mentioning-users-and-teams" class="user-mention">@mention</a> a GitHub username to generate a link to their profile. The resulting <code>&lt;a&gt;</code> element will link to the contributor’s GitHub Profile. For example: In 2007, Chris Wanstrath (<a href="https://github.com/defunkt" class="user-mention">@defunkt</a>), PJ Hyett (<a href="https://github.com/pjhyett" class="user-mention">@pjhyett</a>), and Tom Preston-Werner (<a href="https://github.com/mojombo" class="user-mention">@mojombo</a>) founded GitHub.</p>

<h3>
<a id="support-or-contact" class="anchor" href="#support-or-contact" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Support or Contact</h3>

<p>Having trouble with Pages? Check out our <a href="https://help.github.com/pages">documentation</a> or <a href="https://github.com/contact">contact support</a> and we’ll help you sort it out.</p>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">Qgis-visibility-analysis maintained by <a href="https://github.com/zoran-cuckovic">zoran-cuckovic</a></p>
        <p>Published with <a href="https://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    

  </body>
</html>
